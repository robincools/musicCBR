

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>recommender module &mdash; MusicCBR 2021 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="main module" href="main.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> MusicCBR
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">musicCBR</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="helper_functions.html">helper_functions module</a></li>
<li class="toctree-l2"><a class="reference internal" href="main.html">main module</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">recommender module</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MusicCBR</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="modules.html">musicCBR</a> &raquo;</li>
        
      <li>recommender module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/recommender.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-recommender">
<span id="recommender-module"></span><h1>recommender module<a class="headerlink" href="#module-recommender" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="recommender.recommender">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">recommender.</span></span><span class="sig-name descname"><span class="pre">recommender</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">track_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">database</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lookup_table</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_songs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extract_lyrics</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recommender.html#recommender"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommender.recommender" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A class to make song recommendations based on Spotify audio features and song lyrics.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>track_id</strong> (<em>str</em>) – Spotify track ID of the track we want to make recommendations for.</p></li>
<li><p><strong>database</strong> (<em>DataFrame</em>) – Pandas dataframe with spotify ID’s, audio features and lyrics of the tracks to make recommendations with.</p></li>
<li><p><strong>lookup_table</strong> (<em>DataFrame</em>) – Pandas dataframe with Spotify ID’s and track names and artists.</p></li>
<li><p><strong>n_songs</strong> (<em>int</em>) – Number of songs to recommend.</p></li>
<li><p><strong>alpha</strong> (<em>float</em>) – Number between 0 and 1 to weigh the lyrics recommendation to the feature recommendation.</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>find_song()</dt><dd><p>Returns the audio features from the Spotify-API and the lyrics scraped with the Lyrics-extractor package.</p>
</dd>
<dt>recommender_features(song, database)</dt><dd><p>Calculate cosine similarities between the audio features of the song and the audio features of the songs in the database.</p>
</dd>
<dt>recommender_lyrics(song, dataset)</dt><dd><p>Calculate cosine similarities between the Doc2Vec vectors of the song and the songs in the database.</p>
</dd>
<dt>content_based_recommender(self)</dt><dd><p>Combine recommender_features and recommender_lyrics and get top recommendations.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="recommender.recommender.content_based_recommender">
<span class="sig-name descname"><span class="pre">content_based_recommender</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/recommender.html#recommender.content_based_recommender"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommender.recommender.content_based_recommender" title="Permalink to this definition">¶</a></dt>
<dd><p>This function returns song recommendations based on the audio features and lyrics of a song.
This function inputs the name and the artist of the song, to get an dataframe with the audio features and lyrics of the song with the find_song function.
This dataframe is then used to calculate the cosine-similarities between the song and the database with the recommender_features and recommender_lyrics functions.
The recommendations are made by adding the similarity scores with a weighing constant alpha and sorting them. The songs with the n_songs highest similarities are given as recommendation.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(Pandas DataFrame) Pandas DataFrame of top n_songs recommendations. Columns: Track ID, Track name, similarity score, album image url’s, Spotify track url’s</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="recommender.recommender.find_song">
<span class="sig-name descname"><span class="pre">find_song</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/recommender.html#recommender.find_song"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommender.recommender.find_song" title="Permalink to this definition">¶</a></dt>
<dd><p>This function returns the audio features from the Spotify-API and the lyrics scraped with the Lyrics-extractor package.
This functions inputs the song name, artist and a database to check if the song is already in the database.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(Pandas DataFrame) Pandas DataFrame with Track ID, audio features and track ID</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="recommender.recommender.recommender_features">
<span class="sig-name descname"><span class="pre">recommender_features</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">song</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">database</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recommender.html#recommender.recommender_features"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommender.recommender.recommender_features" title="Permalink to this definition">¶</a></dt>
<dd><p>This function calculates the cosine similarities based on the audio features. All features are normalized to values between zero and one.
This function inputs the dataframe that the find_song function outputs and a database with songs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>song</strong> (<em>DataFrame</em>) – Dataframe with id, audio features and lyrics of song.</p></li>
<li><p><strong>database</strong> (<em>DataFrame</em>) – Dataframe with id, audio features and lyrics of database of songs.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(Pandas DataFrame) Pandas DataFrame with the ID’s and cosine similarity scores (between song and tracks in database) of audio features of all tracks in database</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="recommender.recommender.recommender_lyrics">
<span class="sig-name descname"><span class="pre">recommender_lyrics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">song</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recommender.html#recommender.recommender_lyrics"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommender.recommender.recommender_lyrics" title="Permalink to this definition">¶</a></dt>
<dd><p>This function calculates the cosine similarity between the vector embedding of the song lyrics and the vector embeddings of the database of lyrics.
This function inputs the dataframe that the find_song function outputs and a database with songs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>song</strong> (<em>DataFrame</em>) – Dataframe with id, audio features and lyrics of song.</p></li>
<li><p><strong>database</strong> (<em>DataFrame</em>) – Dataframe with id, audio features and lyrics of database of songs.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(Pandas DataFrame) Pandas DataFrame with the ID’s and cosine similarity scores (between song and tracks in database) of lyrics embeddings of all tracks in database</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="main.html" class="btn btn-neutral float-left" title="main module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Robin Cools.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>